

<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="/js/theme-detection.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8"></script>
        <link rel="preload" as="font" type="font/woff2" href="/font/manrope-v14-latin-regular.woff2" crossorigin>
<link rel="preload" as="font" type="font/woff2" href="/font/manrope-v14-latin-600.woff2" crossorigin>
<link rel="preload" as="font" type="font/woff2" href="/font/manrope-v14-latin-800.woff2" crossorigin>
<link rel="preload" as="font" type="font/woff2" href="/font/open-sans-v35-latin-regular.woff2" crossorigin>
<link rel="preload" as="font" type="font/woff2" href="/font/open-sans-v35-latin-700.woff2" crossorigin>

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <link rel="alternate"  type="application/rss+xml"  href="https://eleventy-documentation.sprucecss.com/feed.xml" />
        
    








    





    


<title>使用外部资源 - Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。</title>
<link rel="canonical" href="https://eleventy-documentation.sprucecss.com/handbook/working-with-external-resources.html" />

<meta name="generator" content="Eleventy v2.0.1" />

<meta property="og:site_name" content="Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。" />
<meta property="og:title" content="使用外部资源 - Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://eleventy-documentation.sprucecss.com/handbook/working-with-external-resources.html" />


    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:image" content="https://eleventy-documentation.sprucecss.com/img/social-share.png" />
    <meta name="twitter:image" content="https://eleventy-documentation.sprucecss.com/img/social-share.png" />
    <meta property="og:image:alt" content="Page image for Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。" />
    <meta name="twitter:image:alt" content="Page image for Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。" />




<link rel="icon" href="/img/favicon.svg" type="image/svg+xml" />

        <link rel="stylesheet" href="/css/main.css?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" />
        <link rel="stylesheet" href="/css/custom.css?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" />
    </head>
    <body>
        <div class="site-wrapper">
            <a class="btn btn--primary skip-link" href="#content">Skip to content</a>
            <div class="container container--wide">
                <header class="header">
  <div class="header__column">
    <a class="header__logo" href="/" aria-label="Stimulus: 一个适用于你已有的 HTML 的简洁 JavaScript 框架。">
      <svg class='logo' width='370' height='60' viewBox='0 0 370 60' xmlns='http://www.w3.org/2000/svg' class='icon'>
    <g class='logo__icon' fill='#D9C6A4'>
        <path d='M1.76 1.85885e-08H58.2399C58.7016 -6.70275e-05 59.1447 0.181237 59.474 0.50484C59.8032 0.828443 59.9921 1.26844 59.9999 1.73V7.37823C59.9999 7.87239 59.9999 8.11947 59.9038 8.30822C59.8192 8.47424 59.6842 8.60923 59.5182 8.69382C59.3294 8.78999 59.0823 8.78999 58.5882 8.78999H45.92C44.7722 8.83556 43.6502 9.14343 42.64 9.68999L15.64 25.55C14.6261 26.0964 13.5008 26.4042 12.35 26.45H1.41176C0.9176 26.45 0.670518 26.45 0.481773 26.3538C0.315747 26.2692 0.180765 26.1342 0.0961706 25.9682C0 25.7795 0 25.5324 0 25.0382V17.2717C0 16.7776 0 16.5305 0.0961706 16.3418C0.180765 16.1757 0.315747 16.0408 0.481773 15.9562C0.670518 15.86 0.9176 15.86 1.41176 15.86H12.35C13.5001 15.9106 14.6243 16.2181 15.64 16.76L18.64 18.51C19.1037 18.7494 19.6181 18.8743 20.14 18.8743C20.6619 18.8743 21.1762 18.7494 21.64 18.51L25.48 16.25C25.6438 16.1661 25.7812 16.0386 25.8772 15.8815C25.9732 15.7245 26.024 15.544 26.024 15.36C26.024 15.1759 25.9732 14.9955 25.8772 14.8384C25.7812 14.6814 25.6438 14.5539 25.48 14.47L17.4 9.71999C16.3879 9.17798 15.2669 8.8704 14.12 8.81999H1.41176C0.9176 8.81999 0.670518 8.81999 0.481773 8.72382C0.315747 8.63923 0.180765 8.50424 0.0961706 8.33822C0 8.14947 0 7.90239 0 7.40823V1.76C0 1.29322 0.185428 0.845555 0.515492 0.515492C0.845555 0.185428 1.29322 1.85885e-08 1.76 1.85885e-08Z'></path>
        <path d='M47.65 15.8799C46.4998 15.9305 45.3757 16.238 44.36 16.7799L17.36 32.6499C16.3479 33.1919 15.2269 33.4994 14.08 33.5499H1.41176C0.9176 33.5499 0.670518 33.5499 0.481773 33.646C0.315747 33.7306 0.180765 33.8656 0.0961706 34.0316C0 34.2204 0 34.4674 0 34.9616V42.7281C0 43.2222 0 43.4693 0.0961706 43.6581C0.180765 43.8241 0.315747 43.9591 0.481773 44.0437C0.670518 44.1398 0.9176 44.1398 1.41176 44.1398H12.35C13.5001 44.0892 14.6243 43.7817 15.64 43.2398L42.64 27.3699C43.652 26.8278 44.773 26.5203 45.92 26.4699H58.5882C59.0823 26.4699 59.3294 26.4699 59.5182 26.3737C59.6842 26.2891 59.8192 26.1541 59.9038 25.9881C59.9999 25.7993 59.9999 25.5523 59.9999 25.0581V17.2916C59.9999 16.7975 59.9999 16.5504 59.9038 16.3616C59.8192 16.1956 59.6842 16.0606 59.5182 15.976C59.3294 15.8799 59.0823 15.8799 58.5882 15.8799H47.65Z'></path>
        <path d='M47.65 33.56C46.4998 33.6106 45.3757 33.9182 44.36 34.46L17.36 50.32C16.3497 50.8666 15.2277 51.1744 14.08 51.22H1.41176C0.9176 51.22 0.670518 51.22 0.481773 51.3162C0.315747 51.4008 0.180765 51.5358 0.0961706 51.7018C0 51.8905 0 52.1376 0 52.6318V58.28C0.0129646 58.739 0.203789 59.175 0.532182 59.4959C0.860576 59.8168 1.30083 59.9976 1.76 60H58.2399C58.7042 59.9974 59.1488 59.8125 59.4781 59.4852C59.8073 59.1578 59.9947 58.7142 59.9999 58.25V52.6018C59.9999 52.1076 59.9999 51.8605 59.9038 51.6718C59.8192 51.5058 59.6842 51.3708 59.5182 51.2862C59.3294 51.19 59.0823 51.19 58.5882 51.19H45.88C44.7322 51.1444 43.6102 50.8366 42.6 50.29L34.52 45.55C34.3536 45.4671 34.2136 45.3394 34.1157 45.1813C34.0179 45.0232 33.966 44.8409 33.966 44.655C33.966 44.4691 34.0179 44.2868 34.1157 44.1287C34.2136 43.9706 34.3536 43.843 34.52 43.76L38.36 41.51C38.8237 41.2706 39.3381 41.1457 39.86 41.1457C40.3819 41.1457 40.8962 41.2706 41.36 41.51L44.36 43.25C45.3739 43.7964 46.4991 44.1042 47.65 44.15H58.5882C59.0823 44.15 59.3294 44.15 59.5182 44.0538C59.6842 43.9693 59.8192 43.8343 59.9038 43.6682C59.9999 43.4795 59.9999 43.2324 59.9999 42.7383V34.9718C59.9999 34.4776 59.9999 34.2305 59.9038 34.0418C59.8192 33.8758 59.6842 33.7408 59.5182 33.6562C59.3294 33.56 59.0823 33.56 58.5882 33.56H47.65Z'></path>
    </g>
    <g class='logo__wordmark' fill='#000'>
        <path d='M363.73 6.09338C365.043 6.29182 366.288 6.80629 367.358 7.59253C368.357 8.37618 369.067 9.46955 369.377 10.7008C369.772 12.4038 369.772 14.1748 369.377 15.8778L368.837 19.0261L355.604 20.6951L356.344 16.2476H348.578L347.149 24.523H355.634C357.361 24.5096 359.086 24.64 360.791 24.9127C362.164 25.1068 363.472 25.6203 364.609 26.4119C365.655 27.1652 366.416 28.25 366.768 29.4901C367.152 31.2012 367.152 32.9761 366.768 34.6872L365.209 43.6821C364.924 45.5578 364.301 47.3661 363.37 49.0191C362.61 50.3318 361.552 51.4478 360.282 52.2773C359.005 53.0816 357.582 53.6251 356.094 53.8763C354.361 54.1698 352.605 54.3103 350.847 54.2961H340.633C338.905 54.3138 337.178 54.1733 335.476 53.8763C334.153 53.6701 332.909 53.1185 331.868 52.2773C330.912 51.4324 330.265 50.2929 330.029 49.0391C329.733 47.2717 329.774 45.4644 330.149 43.7121L330.689 40.4939L344.161 38.7249L343.281 43.7821H351.926L353.466 34.987H344.98C343.235 35.0073 341.491 34.8601 339.773 34.5473C338.423 34.3357 337.15 33.7817 336.075 32.9382C335.099 32.0974 334.425 30.9601 334.157 29.7C333.823 27.923 333.857 26.0964 334.256 24.3331L335.716 15.9178C335.977 14.0865 336.595 12.3243 337.535 10.7308C338.317 9.46015 339.385 8.38915 340.653 7.60253C341.938 6.84202 343.356 6.33008 344.831 6.09338C346.482 5.82458 348.154 5.6942 349.828 5.7036H358.823C360.467 5.69 362.109 5.82042 363.73 6.09338ZM104.837 6.09344C106.15 6.29188 107.395 6.80635 108.465 7.59259C109.464 8.37624 110.174 9.46961 110.484 10.7008C110.879 12.4039 110.879 14.1748 110.484 15.8779L109.944 19.0261L96.7117 20.6952L97.4513 16.2477H89.6857L88.2565 24.523H96.7417C98.4685 24.5097 100.194 24.6401 101.899 24.9128C103.271 25.1068 104.579 25.6203 105.717 26.4119C106.763 27.1653 107.523 28.2501 107.875 29.4902C108.259 31.2013 108.259 32.9762 107.875 34.6873L106.316 43.6822C106.031 45.5578 105.408 47.3661 104.477 49.0191C103.717 50.3319 102.659 51.4478 101.389 52.2773C100.112 53.0817 98.6892 53.6252 97.2014 53.8764C95.4681 54.1699 93.7123 54.3103 91.9544 54.2962H81.7401C80.0119 54.3139 78.2857 54.1734 76.5831 53.8764C75.2607 53.6701 74.0161 53.1185 72.9751 52.2773C72.0191 51.4324 71.372 50.293 71.1361 49.0391C70.8406 47.2717 70.8813 45.4645 71.2561 43.7122L71.7958 40.494L85.2682 38.725L84.3886 43.7821H93.0338L94.5729 34.9871H86.0877C84.3419 35.0074 82.5983 34.8601 80.8806 34.5473C79.5308 34.3358 78.2576 33.7818 77.1827 32.9382C76.2065 32.0975 75.5325 30.9601 75.2638 29.7001C74.9298 27.9231 74.9638 26.0965 75.3638 24.3331L76.8229 15.9179C77.0844 14.0866 77.7024 12.3243 78.6419 10.7308C79.4245 9.46021 80.492 8.38921 81.7601 7.60258C83.0458 6.84208 84.4629 6.33014 85.9378 6.09344C87.5897 5.82463 89.2613 5.69426 90.9349 5.70366H99.9299C101.574 5.69006 103.216 5.82048 104.837 6.09344ZM115.761 6.24855H150.991L148.882 18.2917H138.158L131.981 53.7517H118.209L124.386 18.2917H113.662L115.761 6.24855ZM154.928 6.24855L146.643 53.7517H160.425L168.701 6.24855H154.928ZM192.008 25.0779L205.381 6.24855H217.963L209.688 53.7517H195.876L200.223 28.9157L188.48 45.8162L182.264 29.2555L177.996 53.7517H166.083L174.358 6.24855H184.642L192.008 25.0779ZM245.415 6.24855L239.179 42.1183H231.063L237.31 6.24855H223.547L217.031 43.7373C216.652 45.4935 216.624 47.3076 216.951 49.0743C217.211 50.3401 217.891 51.4811 218.88 52.3125C219.973 53.1474 221.258 53.6939 222.618 53.9016C224.337 54.2062 226.08 54.3501 227.825 54.3313H238.109C239.927 54.3469 241.743 54.2031 243.536 53.9016C245.059 53.6605 246.52 53.1204 247.834 52.3125C249.103 51.491 250.162 50.3816 250.922 49.0743C251.839 47.4179 252.452 45.6103 252.731 43.7373L259.227 6.24855H245.415ZM264.791 6.24855H278.573L272.397 41.7085H287.189L285.09 53.7517H256.516L264.791 6.24855ZM319.011 6.24855L312.774 42.1183H304.659L310.905 6.24855H297.143L290.627 43.7373C290.247 45.4935 290.22 47.3076 290.547 49.0743C290.807 50.3402 291.486 51.4812 292.476 52.3125C293.569 53.1474 294.854 53.6939 296.214 53.9016C297.932 54.2062 299.675 54.3501 301.421 54.3313H311.705C313.523 54.3469 315.339 54.2031 317.132 53.9016C318.655 53.6605 320.116 53.1204 321.429 52.3125C322.699 51.491 323.757 50.3816 324.518 49.0743C325.435 47.4179 326.048 45.6103 326.327 43.7373L332.823 6.24855H319.011Z'></path>
    </g>
</svg>
    </a>
    
    <nav class="header__navigation">
      <ul>
        
        <li>
          <a
            href="https://stimulus.hotwired.dev/"
            
            
          >
            源站点 
          </a>
        </li>
        
        <li>
          <a
            href="/faq/"
            
            
          >
            关于 
          </a>
        </li>
        
      </ul>
    </nav>
    
    <button
      class="btn btn--primary btn--icon header__toggle"
      data-action="sidebar-toggle"
      aria-controls="primary-menu"
      aria-expanded="false"
      aria-label="Toogle navigation"
    >
      <svg aria-hidden='true' focusable='false' role='img' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' style='fill: currentColor' width='24' height='24' class='btn__icon'>
    <path d='M24,19.6c0,-0.331 -0.269,-0.6 -0.6,-0.6l-20.8,0c-0.331,0 -0.6,0.269 -0.6,0.6l0,2.8c0,0.331 0.269,0.6 0.6,0.6l20.8,-0c0.331,-0 0.6,-0.269 0.6,-0.6l0,-2.8Zm0,-9c0,-0.331 -0.269,-0.6 -0.6,-0.6l-22.8,-0c-0.331,-0 -0.6,0.269 -0.6,0.6l0,2.8c0,0.331 0.269,0.6 0.6,0.6l22.8,-0c0.331,-0 0.6,-0.269 0.6,-0.6l0,-2.8Zm0,-9c0,-0.331 -0.269,-0.6 -0.6,-0.6l-15.8,-0c-0.331,-0 -0.6,0.269 -0.6,0.6l0,2.8c0,0.331 0.269,0.6 0.6,0.6l15.8,-0c0.331,-0 0.6,-0.269 0.6,-0.6l0,-2.8Z'></path>
</svg>

    </button>
  </div>
  <div class="header__actions">
    <span class="open-search">
    <svg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 24 24' width='24' height='24' style='fill: currentColor' class='open-search__icon'>
    <path d='M19.501,9.75c-0,2.152 -0.699,4.14 -1.875,5.752l5.935,5.94c0.585,0.586 0.585,1.537 -0,2.123c-0.586,0.586 -1.538,0.586 -2.124,0l-5.935,-5.939c-1.612,1.181 -3.6,1.875 -5.752,1.875c-5.386,-0 -9.75,-4.364 -9.75,-9.751c0,-5.386 4.364,-9.75 9.75,-9.75c5.387,-0 9.751,4.364 9.751,9.75Zm-9.751,6.751c3.704,-0 6.751,-3.047 6.751,-6.751c-0,-3.703 -3.047,-6.75 -6.751,-6.75c-3.703,0 -6.75,3.047 -6.75,6.75c0,3.704 3.047,6.751 6.75,6.751Z'></path>
</svg>

    <span class="open-search__caption">Search</span>
    <button class="btn btn--outline-primary btn--sm open-search__btn" data-action="open-search">
        Ctrl K
    </button>
</span>
 <div class="theme-switcher" id="theme-switcher">
    <button
        class="btn btn--outline-primary btn--sm btn--icon theme-switcher__system-mode"
        aria-label="Switch to light mode"
        data-action="light"
    >
        <svg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 24 24' width='24' height='24' style='fill: currentColor' class='btn__icon'>
    <path d='M21,12c0,-4.969 -4.031,-9 -9,-9l0,18c4.969,0 9,-4.031 9,-9Zm3,0c0,6.628 -5.372,12 -12,12c-6.628,0 -12,-5.372 -12,-12c0,-6.628 5.372,-12 12,-12c6.628,0 12,5.372 12,12Z'></path>
</svg>

    </button>
    <button
        class="btn btn--outline-primary btn--sm btn--icon theme-switcher__light-mode"
        aria-label="Switch to dark mode"
        data-action="dark"
    >
        <svg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 24 24' width='24' height='24' style='fill: currentColor' class='btn__icon'>
    <path d='M5.509,3.917l-0.425,-0.426c-0.426,-0.425 -1.113,-0.415 -1.528,0l-0.01,0.011c-0.426,0.425 -0.426,1.113 -0,1.527l0.425,0.426c0.426,0.425 1.102,0.425 1.527,-0l0.011,-0.011c0.426,-0.415 0.426,-1.113 0,-1.527Zm-3.316,6.938l-1.113,-0c-0.6,-0 -1.08,0.48 -1.08,1.08l-0,0.011c-0,0.6 0.48,1.08 1.08,1.08l1.102,-0c0.611,0.011 1.091,-0.469 1.091,-1.069l-0,-0.011c-0,-0.611 -0.48,-1.091 -1.08,-1.091Zm9.818,-10.855l-0.011,-0c-0.61,-0 -1.09,0.48 -1.09,1.08l-0,1.047c-0,0.6 0.48,1.08 1.08,1.08l0.01,0c0.611,0.011 1.091,-0.469 1.091,-1.069l0,-1.058c0,-0.6 -0.48,-1.08 -1.08,-1.08Zm8.444,3.502c-0.425,-0.426 -1.112,-0.426 -1.538,-0.011l-0.425,0.426c-0.426,0.425 -0.426,1.112 -0,1.527l0.011,0.011c0.425,0.425 1.112,0.425 1.527,-0l0.425,-0.426c0.426,-0.425 0.426,-1.102 0,-1.527Zm-1.974,16.473l0.425,0.426c0.426,0.425 1.113,0.425 1.538,-0c0.426,-0.426 0.426,-1.113 0,-1.538l-0.425,-0.426c-0.426,-0.425 -1.113,-0.414 -1.527,0c-0.437,0.436 -0.437,1.113 -0.011,1.538Zm2.247,-8.04l0,0.011c0,0.6 0.48,1.08 1.08,1.08l1.102,-0c0.6,-0 1.08,-0.48 1.08,-1.08l-0,-0.011c-0,-0.6 -0.48,-1.08 -1.08,-1.08l-1.102,-0c-0.6,-0 -1.08,0.48 -1.08,1.08Zm-8.728,-6.535c-3.611,0 -6.545,2.935 -6.545,6.546c-0,3.611 2.934,6.546 6.545,6.546c3.612,-0 6.546,-2.935 6.546,-6.546c0,-3.611 -2.934,-6.546 -6.546,-6.546Zm-0.01,18.492l0.01,-0c0.6,-0 1.08,-0.48 1.08,-1.08l0,-1.048c0,-0.6 -0.48,-1.08 -1.08,-1.08l-0.01,0c-0.6,0 -1.08,0.48 -1.08,1.08l-0,1.048c-0,0.6 0.48,1.08 1.08,1.08Zm-8.444,-3.502c0.425,0.425 1.112,0.425 1.538,-0l0.425,-0.426c0.426,-0.425 0.415,-1.112 0,-1.527l-0.011,-0.011c-0.425,-0.425 -1.112,-0.425 -1.538,0l-0.425,0.426c-0.415,0.436 -0.415,1.112 0.011,1.538Z'></path>
</svg>

    </button>
    <button
        class="btn btn--outline-primary btn--sm btn--icon theme-switcher__dark-mode"
        aria-label="Switch to system mode"
        data-action="system"
    >
        <svg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 24 24' width='24' height='24' style='fill: currentColor' class='btn__icon'>
    <path d='M13.684,-0c-6.616,-0 -11.974,5.373 -11.974,12c0,6.627 5.358,12 11.974,12c3.246,0 6.187,-1.296 8.346,-3.396c0.268,-0.263 0.338,-0.67 0.166,-1.002c-0.171,-0.332 -0.541,-0.52 -0.911,-0.456c-0.525,0.092 -1.06,0.14 -1.612,0.14c-5.191,-0 -9.402,-4.222 -9.402,-9.429c0,-3.525 1.929,-6.595 4.784,-8.212c0.327,-0.188 0.493,-0.563 0.413,-0.927c-0.081,-0.364 -0.392,-0.638 -0.767,-0.67c-0.337,-0.027 -0.675,-0.043 -1.017,-0.043l-0,-0.005Z'></path>
</svg>

    </button>
</div>

    <div class="header__socials">
      
      <a href="https://github.com/travelless/stimulus" aria-label="GitHub">
        <svg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 24 24' width='24' height='24' style='fill: currentColor;' class='icon'>
    <path d='M9.305,15.635c-0,1.045 -0.545,2.755 -1.835,2.755c-1.29,-0 -1.835,-1.71 -1.835,-2.755c-0,-1.045 0.545,-2.755 1.835,-2.755c1.29,-0 1.835,1.71 1.835,2.755Zm14.695,-2.525c-0,1.595 -0.16,3.285 -0.875,4.75c-1.895,3.83 -7.105,3.74 -10.835,3.74c-3.79,-0 -9.31,0.135 -11.28,-3.74c-0.73,-1.45 -1.01,-3.155 -1.01,-4.75c0,-2.095 0.695,-4.075 2.075,-5.68c-0.26,-0.79 -0.385,-1.62 -0.385,-2.44c-0,-1.075 0.245,-1.615 0.73,-2.59c2.265,-0 3.715,0.45 5.44,1.8c1.45,-0.345 2.94,-0.5 4.435,-0.5c1.35,-0 2.71,0.145 4.02,0.46c1.7,-1.335 3.15,-1.76 5.39,-1.76c0.49,0.975 0.73,1.515 0.73,2.59c-0,0.82 -0.13,1.635 -0.385,2.41c1.375,1.62 1.95,3.615 1.95,5.71Zm-3.215,2.525c-0,-2.195 -1.335,-4.13 -3.675,-4.13c-0.945,-0 -1.85,0.17 -2.8,0.3c-0.745,0.115 -1.49,0.16 -2.255,0.16c-0.76,-0 -1.505,-0.045 -2.255,-0.16c-0.935,-0.13 -1.85,-0.3 -2.8,-0.3c-2.34,-0 -3.675,1.935 -3.675,4.13c-0,4.39 4.02,5.065 7.52,5.065l2.41,-0c3.515,-0 7.53,-0.67 7.53,-5.065Zm-4.13,-2.755c-1.29,-0 -1.835,1.71 -1.835,2.755c-0,1.045 0.545,2.755 1.835,2.755c1.29,-0 1.835,-1.71 1.835,-2.755c-0,-1.045 -0.545,-2.755 -1.835,-2.755Z'></path>
</svg>

      </a>
        
    </div>
  </div>
</header>

                <div class="l-main">
                    <aside class="sidebar l-main__sidebar">
    <div class="sidebar__body">
        
            <div class="sidebar-section sidebar-section--navigation">
                <h3 class="sidebar-section__title">Navigation</h3>
                <nav class="sidebar-section__navigation">
                    <ul>
                        
                        <li>
                            <a
                                href="https://stimulus.hotwired.dev/"
                                
                                
                            >
                                源站点
                                
                            </a>
                        </li>
                        
                        <li>
                            <a
                                href="/faq/"
                                
                                
                            >
                                关于
                                
                            </a>
                        </li>
                        
                    </ul>
                </nav>
            </div>
        

        
        
            <div class="sidebar-section">
                <h3 class="sidebar-section__title">Handbook</h3>
                <nav class="sidebar-section__navigation">
                    <ul>
                        
                            <li><a href="/handbook/origin.html" >stimulus的起源</a></li>
                        
                            <li><a href="/handbook/introduction.html" >介绍</a></li>
                        
                            <li><a href="/handbook/hello-stimulus.html" >你好，stimulus</a></li>
                        
                            <li><a href="/handbook/building-something-real.html" >尝试实践</a></li>
                        
                            <li><a href="/handbook/designing-for-resilience.html" >弹性设计</a></li>
                        
                            <li><a href="/handbook/managing-state.html" >管理项目</a></li>
                        
                            <li><a href="/handbook/working-with-external-resources.html"  aria-current="page" data-state="active">使用外部资源</a></li>
                        
                            <li><a href="/handbook/installing.html" >在应用程序中安装Stimulus</a></li>
                        
                    </ul>
                </nav>
            </div>
        
            <div class="sidebar-section">
                <h3 class="sidebar-section__title">Reference</h3>
                <nav class="sidebar-section__navigation">
                    <ul>
                        
                            <li><a href="/reference/controllers.html" >控制器</a></li>
                        
                            <li><a href="/reference/lifecycle-callbacks.html" >生命周期回调</a></li>
                        
                            <li><a href="/reference/actions.html" >行动</a></li>
                        
                            <li><a href="/reference/targets.html" >目标</a></li>
                        
                            <li><a href="/reference/outlets.html" >插座</a></li>
                        
                    </ul>
                </nav>
            </div>
        
    </div>
    <div class="sidebar__footer">
        © 2023 - Copyright
    </div>
</aside>

                    <div class="l-main__body">
                        <main id="content">
<article class="l-post" data-pagefind-body>
    <div class="post-heading">
    
    
        <ol class="breadcrumb-list post-heading__breadcrumb">
  <li>
    <a href="/">Home</a>
  </li> 
  <li>
    
    <span aria-current="page">Handbook</span>
    
  </li> 
  <li>
    
    <span aria-current="page">使用外部资源</span>
    
  </li>
</ol>

    
    
        <h1 class="post-heading__title">
            使用外部资源
        </h1>
    
    
    
</div>
 
  <div class="l-post__toc toc" aria-labelledby="toc-title">
    <section class="toc" aria-labelledby="toc-title">
      <h3 class="toc__title" id="toc-title">On this page</h3>
      <nav class="toc__navigation"><nav class="toc" >
        <ol><li><a href="#%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD-html">异步加载 HTML</a></li><li><a href="#%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0">定时自动刷新</a></li><li><a href="#%E9%87%8A%E6%94%BE%E8%B7%9F%E8%B8%AA%E7%9A%84%E8%B5%84%E6%BA%90">释放跟踪的资源</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E5%8A%A8%E4%BD%9C%E5%8F%82%E6%95%B0">使用动作参数</a></li><li><a href="#%E6%80%BB%E7%BB%93%E5%92%8C%E4%B8%8B%E4%B8%80%E6%AD%A5">总结和下一步</a></li></ol>
      </nav></nav>
    </section>
  </div>
  
  <div class="l-post__content post-content"><p>在上一章中，我们学习了如何使用值加载和持久化控制器的内部状态。</p>
<p>有时，我们的控制器需要跟踪外部资源的状态，这里的外部指的是不在 DOM 或刺激物的一部分中的任何东西。例如，我们可能需要发出一个 HTTP 请求，并在请求状态改变时进行响应。或者我们可能想要启动一个计时器，然后在控制器不再连接时停止它。在本章中，我们将看到如何做到这两件事。</p>
<h2 id="%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD-html" tabindex="-1">异步加载 HTML <a class="anchor" href="#%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD-html">#</a></h2>
<p>让我们学习如何通过加载和插入远程 HTML 片段来异步填充页面的各个部分。我们在 Basecamp 中使用这种技术来保持初始页面的快速加载，并使我们的视图不包含用户特定的内容，从而可以更有效地缓存它们。</p>
<p>我们将构建一个通用的内容加载器控制器，用从服务器获取的 HTML 填充它的元素。然后我们将使用它来加载未读消息列表，就像您在电子邮件收件箱中看到的那样。</p>
<p>首先在 public/index.html 中勾画收件箱:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-loader<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-content-loader-url-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/messages.html<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>然后为我们的消息列表创建一个新的 public/messages.html 文件:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>New Message: Stimulus Launch Party<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Overdue: Finish Stimulus 1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span></code></pre>
<p>(在实际应用程序中，您将在服务器上动态生成此 HTML，但出于演示目的，我们将只使用静态文件。)</p>
<p>现在我们可以实现我们的控制器:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// src/controllers/content_loader_controller.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hotwired/stimulus'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span>
  <span class="token keyword">static</span> values <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>urlValue<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>制器连接时，我们启动对元素的 data-content-loader-url-value 属性中指定的 URL 的 Fetch 请求。然后，通过将返回的 HTML 赋值给元素的 innerHTML 属性来加载它。</p>
<p>在浏览器的开发人员控制台中打开 network 选项卡并重新加载页面。您将看到一个表示初始页面加载的请求，随后是控制器对 messages.html 的后续请求。</p>
<h2 id="%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0" tabindex="-1">定时自动刷新 <a class="anchor" href="#%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0">#</a></h2>
<p>让我们改进我们的控制器，将其更改为定期刷新收件箱，使其始终是最新的。</p>
<p>我们将使用<code>data-content-loader-refresh-interval-value</code>属性来指定控制器加载内容的频率，以毫秒为单位:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-loader<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-content-loader-url-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/messages.html<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-content-loader-refresh-interval-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5000<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>现在我们可以更新控制器来检查间隔，如果间隔存在，则启动刷新计时器。</p>
<p>为控制器添加一个静态值定义，并定义一个新方法 startRefreshing():</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span>
  <span class="token keyword">static</span> values <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">refreshInterval</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">startRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refreshIntervalValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// …</span>
<span class="token punctuation">}</span></code></pre>
<p>然后更新 connect()方法，以便在间隔值存在时调用 startRefreshing():</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasRefreshIntervalValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">startRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>重新加载页面，并在开发人员控制台中每五秒钟观察一次新请求。然后对 public/messages.html 进行修改，等待它出现在收件箱中。</p>
<h2 id="%E9%87%8A%E6%94%BE%E8%B7%9F%E8%B8%AA%E7%9A%84%E8%B5%84%E6%BA%90" tabindex="-1">释放跟踪的资源 <a class="anchor" href="#%E9%87%8A%E6%94%BE%E8%B7%9F%E8%B8%AA%E7%9A%84%E8%B5%84%E6%BA%90">#</a></h2>
<p>当控制器连接时，我们启动计时器，但我们从不停止它。这意味着，如果控制器的元素消失了，控制器将继续在后台发出 HTTP 请求。</p>
<p>我们可以通过修改 startrefresh()方法来解决这个问题，以保持对计时器的引用:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">startRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refreshIntervalValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">然后我们可以在下面添加一个相应的stopRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法来取消计时器<span class="token operator">:</span>
<span class="token function">stopRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>最后，为了指示 Stimulus 在控制器断开连接时取消计时器，我们将添加一个 disconnect()方法:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stopRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>现在我们可以确定，内容加载器控制器只会在连接到 DOM 时发出请求。</p>
<p>让我们来看看最后一个控制器类:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// src/controllers/content_loader_controller.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hotwired/stimulus'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span>
  <span class="token keyword">static</span> values <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">refreshInterval</span><span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasRefreshIntervalValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">startRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stopRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>urlValue<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">startRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refreshIntervalValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">stopRefreshing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refreshTimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="%E4%BD%BF%E7%94%A8%E5%8A%A8%E4%BD%9C%E5%8F%82%E6%95%B0" tabindex="-1">使用动作参数 <a class="anchor" href="#%E4%BD%BF%E7%94%A8%E5%8A%A8%E4%BD%9C%E5%8F%82%E6%95%B0">#</a></h2>
<p>如果我们想让加载器与多个不同的源一起工作，我们可以使用动作参数来实现。以 HTML 为例:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-loader<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
    <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span>
    <span class="token attr-name">data-content-loader-url-param</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/messages.html<span class="token punctuation">"</span></span>
    <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-loader#load<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>Messages<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span>
  <span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
    <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span>
    <span class="token attr-name">data-content-loader-url-param</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/comments.html<span class="token punctuation">"</span></span>
    <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content-loader#load<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>Comments<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span>
  <span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>然后我们可以通过 load 动作使用这些参数:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@hotwired/stimulus'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span>
  <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>我们甚至可以析构参数来获取 URL 参数:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> url <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">html</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="%E6%80%BB%E7%BB%93%E5%92%8C%E4%B8%8B%E4%B8%80%E6%AD%A5" tabindex="-1">总结和下一步 <a class="anchor" href="#%E6%80%BB%E7%BB%93%E5%92%8C%E4%B8%8B%E4%B8%80%E6%AD%A5">#</a></h2>
<p>在本章中，我们看到了如何使用刺激生命周期回调来获取和释放外部资源。</p>
<p>接下来，我们将看到如何在您自己的应用程序中安装和配置 Stimulus。</p>
</div>
</article>



<nav class="post-navigation">
    
        <a class="post-navigation-item post-navigation-item--prev" href="/handbook/managing-state.html">
            <span class="post-navigation-item__icon">
                <svg width='100%' height='100%' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xml:space='preserve' xmlns:serif='http://www.serif.com/' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;fill:currentColor;' class='icon'>
    <path d='M22.46,10.468l-17.204,-0l7.516,-7.517c0.601,-0.6 0.601,-1.586 0,-2.187c-0.601,-0.6 -1.571,-0.6 -2.172,0l-10.149,10.15c-0.601,0.601 -0.601,1.571 -0,2.172l10.149,10.15c0.601,0.6 1.571,0.6 2.172,-0c0.601,-0.601 0.601,-1.571 0,-2.172l-7.516,-7.516l17.204,-0c0.847,-0 1.54,-0.693 1.54,-1.54c0,-0.847 -0.693,-1.54 -1.54,-1.54Z'></path>
</svg>

            </span>
            <span class="post-navigation-item__caption">
                Previous
                <span class="post-navigation-item__title">管理项目</span>
            </span>
        </a>
    
    
        <a class="post-navigation-item post-navigation-item--next" href="/handbook/installing.html">
            <span class="post-navigation-item__caption">
                Next
                <span class="post-navigation-item__title">在应用程序中安装Stimulus</span>
            </span>
            <span class="post-navigation-item__icon">
                <svg width='100%' height='100%' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;fill:currentColor;' class='icon'>
    <path d='M1.54,13.532l17.204,0l-7.516,7.517c-0.601,0.6 -0.601,1.586 -0,2.187c0.601,0.6 1.571,0.6 2.172,-0l10.149,-10.15c0.601,-0.601 0.601,-1.571 0,-2.172l-10.149,-10.15c-0.601,-0.6 -1.571,-0.6 -2.172,0c-0.601,0.601 -0.601,1.571 -0,2.172l7.516,7.516l-17.204,0c-0.847,0 -1.54,0.693 -1.54,1.54c0,0.847 0.693,1.54 1.54,1.54Z'></path>
</svg>

            </span
        ></a>
    
</nav>
 </main>
                        <footer class="footer">
    <div class="footer__inner">
        <!--  -->
    </div>
</footer>

                    </div>
                </div>
            </div>
        </div>
        <div class="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true">
        <div id="search" class="search"></div>
    </div>
</div>

<script src="/_pagefind/pagefind-ui.js" onload="new PagefindUI({ element: '#search', showImages: false });"></script>


        <script src="/js/theme-change-assets.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" defer></script>
        <script src="/js/navigation.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" defer></script>
        <script src="/js/theme-switcher.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" defer></script>
        <script src="/js/modal.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" defer></script>
        <script src="/js/accordion-card.js?14fd8c87-39a6-42df-a3d5-aefcef00f2b8" defer></script>
    </body>
</html>
